(this["webpackJsonpowi-arm"]=this["webpackJsonpowi-arm"]||[]).push([[0],{10:function(t,e,o){},19:function(t,e,o){t.exports=o(29)},25:function(t,e,o){},26:function(t,e,o){},27:function(t,e,o){},28:function(t,e,o){},29:function(t,e,o){"use strict";o.r(e);o(20);var n=o(1),a=o.n(n),i=o(15),s=o.n(i),r=o(3),l=o(8),c=o(5),d=o(4),u=(o(10),o(2)),p=o(0),h=o(16),f=o(6),g=o(7),m=function(t){return a.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas",height:t.height,width:t.width,className:t.className,"data-icon":"chevron-right",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},a.a.createElement("path",{fill:t.fill,d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}))},b=(o(25),function(t){t.stopPropagation()}),v=a.a.memo((function(t){var e=Object(n.useState)(""),o=Object(g.a)(e,2),i=o[0],s=o[1],r=Object(n.useState)("0px"),l=Object(g.a)(r,2),c=l[0],d=l[1],u=Object(n.useState)("accordion__icon"),p=Object(g.a)(u,2),h=p[0],f=p[1],v=Object(n.useState)(""),w=Object(g.a)(v,2),x=w[0],P=w[1],E=Object(n.useRef)(null);return a.a.useEffect((function(){t.onSelect||(s(""),P(""),f("accordion__icon"),d("0px"))}),[t.onSelect]),a.a.createElement("div",{className:"accordion__section"},a.a.createElement("button",{className:t.onSelect?"accordion ".concat(x):"accordion ".concat(i),onClick:t.onSelect?function(e){d("0px"),"selected-item"!==x?(t.selectItem(t.index),P("selected-item")):(t.deSelectItem(t.index),P("")),e.preventDefault(),e.stopPropagation()}:function(){var t;s(""===i?"active":""),d("active"===i?"0px":"".concat(null===(t=E.current)||void 0===t?void 0:t.scrollHeight,"px")),f("active"===i?"accordion__icon":"accordion__icon rotate")},onTouchStart:b,onTouchEnd:b,onMouseDown:b,onMouseUp:b},t.children.header,a.a.createElement(m,{className:t.onSelect?"accordion__icon":"".concat(h),width:15,height:15,fill:"#777"})),a.a.createElement("div",{ref:E,className:"accordion__content",style:{maxHeight:t.onSelect?"0px":c}},a.a.createElement("div",{className:"accordion__text"},t.children.body)))})),w=(o(26),o(27),function(t){t.stopPropagation()}),x=function(t){"Enter"===t.key&&t.currentTarget.blur()},P=function(t,e){return function(o){if(o.stopPropagation(),o.preventDefault(),!function(t){var e=Math.floor(Number(t));return e!==1/0&&String(e)===t}(e))return alert("The value must be numeric."),o.currentTarget.value=t.value,void window.scrollTo(0,0);var n=parseInt(e);n>=t.min&&n<=t.max?t.updateRobotValue(t.index,t.valueIndex,n):(alert("The value must be within the boundaries. \nMin: ".concat(t.min,"    Max: ").concat(t.max)),o.currentTarget.value=t.value),window.scrollTo(0,0)}},E=Object(n.memo)((function(t){var e=Object(n.useState)("0"),o=Object(g.a)(e,2),i=o[0],s=o[1];return a.a.useEffect((function(){s(t.value)}),[t.value]),a.a.createElement("form",{onMouseUp:w,onTouchEnd:w,onMouseDown:w,onTouchStart:w},a.a.createElement("div",{className:"label"},a.a.createElement("p",null,t.label)),a.a.createElement("div",{className:"input"},a.a.createElement("input",{type:"number",onChange:function(t){s(t.target.value),t.stopPropagation()},value:i,max:t.max,min:t.min,onBlur:P(t,i),onKeyDown:x,onMouseUp:w,onTouchEnd:w,onMouseDown:w,onTouchStart:w})))})),S=function(t){Object(c.a)(o,t);var e=Object(d.a)(o);function o(t){var n;return Object(r.a)(this,o),(n=e.call(this,t)).resetPosition=function(t){t.currentTarget.blur(),n.props.resetPosition(),t.stopPropagation()},n.stopPropagation=function(t){t.stopPropagation()},n.onAddItem=function(t){t.currentTarget.blur(),n.setState({RobotValues:[].concat(Object(u.a)(n.state.RobotValues),[{values:[0,0,0,0,0]}])}),t.stopPropagation()},n.selectItem=function(t){var e=n.state.selectedPositions;e.push(t),n.setState({selectedPositions:e})},n.deSelectItem=function(t){var e=n.state.selectedPositions;e.splice(t,1),n.setState({selectedPositions:e})},n.setSelectState=function(t){t.currentTarget.blur(),n.setState({select:!0}),t.stopPropagation()},n.cancelSelect=function(t){t.currentTarget.blur(),n.setState({select:!1}),t.stopPropagation()},n.onDeleteItems=function(t){t.currentTarget.blur();var e=Object(u.a)(n.state.RobotValues),o=Object(u.a)(n.state.selectedPositions);o.sort((function(t,e){return e-t})),o.forEach((function(t){e.splice(t,1)})),n.setState({RobotValues:e,select:!1,selectedPositions:[]}),t.stopPropagation()},n.loadCurrentPosition=function(t){if(t.currentTarget.blur(),t.stopPropagation(),0!==n.state.RobotValues.length){var e=n.props.receiveRobotValues(),o=n.state.RobotValues.length-1,a=Object(u.a)(n.state.RobotValues);a[o]={values:e},n.setState({RobotValues:a})}},n.startAnimation=function(t){n.props.startAnimation(n.state.RobotValues),t.currentTarget.blur(),t.stopPropagation()},n.stopAnimation=function(t){n.props.stopAnimation(),t.currentTarget.blur(),t.stopPropagation()},n.updateRobotValue=function(t,e,o){var a=Object(u.a)(n.state.RobotValues);a[t].values[e]=o,n.setState({RobotValues:a})},n.renderAccordion=function(){return a.a.createElement("div",{style:{padding:10},onMouseUp:n.stopPropagation,onTouchEnd:n.stopPropagation,onMouseDown:n.stopPropagation,onTouchStart:n.stopPropagation},n.state.RobotValues.map((function(t,e){return a.a.createElement(v,{key:e+"g",index:e,selectItem:n.selectItem,deSelectItem:n.deSelectItem,onSelect:n.state.select},{header:a.a.createElement("div",null,"Position ".concat(e+1)),body:a.a.createElement("div",null,a.a.createElement(E,{value:t.values[0].toString(),label:"Joint 1",index:e,valueIndex:0,updateRobotValue:n.updateRobotValue,min:-135,max:135}),a.a.createElement(E,{value:t.values[1].toString(),label:"Joint 2",index:e,valueIndex:1,updateRobotValue:n.updateRobotValue,min:-85,max:85}),a.a.createElement(E,{value:t.values[2].toString(),label:"Joint 3",index:e,valueIndex:2,updateRobotValue:n.updateRobotValue,min:-135,max:135}),a.a.createElement(E,{value:t.values[3].toString(),label:"Joint 4",index:e,valueIndex:3,updateRobotValue:n.updateRobotValue,min:-60,max:60}),a.a.createElement(E,{value:t.values[4].toString(),label:"Gripper",index:e,valueIndex:4,updateRobotValue:n.updateRobotValue,min:0,max:100}))})})))},n.state={select:!1,selectedPositions:[],RobotValues:[{values:[0,0,0,0,0]}]},n}return Object(l.a)(o,[{key:"render",value:function(){var t=this.state.select,e=this.props.animate;return a.a.createElement("div",null,a.a.createElement("div",{className:"positions-container"},a.a.createElement("h4",null,"Set Arm Movement"),a.a.createElement("p",null,"Use the controls below to set a sequence of angle positions. Use the animate button to show the robot arm motion."),a.a.createElement("div",{className:"button-container"},a.a.createElement(f.a,{size:"lg","aria-label":"positions-button",variant:"primary",disabled:e,onClick:t?this.cancelSelect:this.setSelectState,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},this.state.select?"Cancel":"Select"),a.a.createElement(f.a,{size:"lg",disabled:e,"aria-label":"positions-button",variant:"primary",onClick:t?this.onDeleteItems:this.onAddItem,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},t?"Delete":"Add"),a.a.createElement(f.a,{size:"lg",disabled:t||e,"aria-label":"positions-button",variant:"primary",onClick:this.loadCurrentPosition,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},"Current Position")),this.renderAccordion()),a.a.createElement("div",{className:"button-container"},a.a.createElement(f.a,{size:"lg",disabled:t||e,variant:"primary","aria-label":"First group",onClick:this.resetPosition,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},"Reset Arm"),a.a.createElement(f.a,{size:"lg",disabled:t||e,variant:"primary","aria-label":"Second group",onClick:this.startAnimation,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},"Animate"),a.a.createElement(f.a,{size:"lg",disabled:t||!e,variant:"primary","aria-label":"Third group",onClick:this.stopAnimation,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},"Stop")))}}]),o}(a.a.PureComponent),j={fontsize:100,fontface:"Roboto",backgroundColor:"#ffffff"},C={fontsize:100,textColor:"#ff0000",borderColor:"#ff0000",backgroundColor:"#ffffff"},T={fontsize:100,textColor:"#007000",borderColor:"#007000",backgroundColor:"#ffffff"},A={fontsize:100,textColor:"#00b0ff",borderColor:"#00b0ff",backgroundColor:"#ffffff"},y=[{label:"Joint 1",defaultVal:0,max:135,min:-135,valUnit:"\xb0"},{label:"Joint 2",defaultVal:0,max:75,min:-75,valUnit:"\xb0"},{label:"Joint 3",defaultVal:0,max:135,min:-135,valUnit:"\xb0"},{label:"Joint 4",defaultVal:0,max:60,min:-60,valUnit:"\xb0"},{label:"Gripper",defaultVal:0,max:100,min:0,valUnit:"%"}],M=function(t){t.stopPropagation()},V=function(t,e,o,n,a){return function(i){var s=parseFloat(t.endEffectorYcor().toFixed(1)),r=parseInt(i.target.value),l=t.effectorIntersect();s>=.5&&!l?(o(r),a(r-e),t.updateValue(t.index,r)):(r-e^n)<0?t.updateValue(t.index,r):0!==t.index||l||t.updateValue(t.index,r),i.stopPropagation(),i.preventDefault()}},R=a.a.memo((function(t){var e=a.a.useState(t.value),o=Object(g.a)(e,2),n=o[0],i=o[1],s=a.a.useState(0),r=Object(g.a)(s,2),l=r[0],c=r[1],d=t.valUnit?t.valUnit:"";return a.a.createElement("div",{className:"slider-container"},a.a.createElement("div",{className:"slider-label"},a.a.createElement("b",null,t.label)),a.a.createElement("div",{className:"sliderDiv",onMouseDown:M,onMouseUp:M,onTouchStart:M,onTouchEnd:M},a.a.createElement("input",{className:"slider",type:"range",disabled:!!t.disabled,value:t.value,onChange:V(t,n,i,l,c),min:t.min?t.min:0,max:t.max?t.max:0,step:1})),a.a.createElement("div",{className:"slider-value"},a.a.createElement("b",null,t.value+d)))})),k=function(t){Object(c.a)(o,t);var e=Object(d.a)(o);function o(t){var n;Object(r.a)(this,o),(n=e.call(this,t)).containerRef=void 0,n.longPressTimeout=void 0,n.onMobile=void 0,n.resizeControls=function(){var t=window.matchMedia("(orientation: portrait)").matches;if(n.onMobile)n.setState({pos:t?n.state.portraitPos:n.state.landscapePos,backgroundColor:"#222831da",width:t?"100%":"45%",height:t?"45%":"100%"}),window.scrollTo(0,0);else if(n.containerRef.current){var e=n.containerRef.current,o=e.offsetWidth,a=e.offsetLeft,i=window.innerWidth-o;n.setState({pos:{x:a>=i?i:a,y:0},backgroundColor:"#222831da"})}},n.onMouseDown=function(t){if(0===t.button){var e=t.currentTarget.offsetTop,o=t.currentTarget.offsetLeft,a={x:t.pageX-o,y:t.pageY-e};t.currentTarget.style.cursor="move",n.setState({dragging:!0,rel:a,backgroundColor:"#222831a0"}),t.stopPropagation()}},n.onMouseMove=function(t){if(n.state.dragging){var e=window,o=e.innerHeight,a=e.innerWidth,i=t.currentTarget,s=i.offsetWidth,r=i.offsetHeight,l=t.pageX-n.state.rel.x,c=t.pageY-n.state.rel.y;l<0?l=0:l>a-s&&(l=a-s),c<0?c=0:c>o-r&&(c=o-r),n.setState({pos:{x:l,y:c}}),t.stopPropagation()}},n.onMouseUp=function(t){t.currentTarget.style.cursor="auto",n.setState({dragging:!1,backgroundColor:"#222831da"}),t.stopPropagation()},n.onMouseLeave=function(t){t.currentTarget.style.cursor="auto",n.setState({dragging:!1,backgroundColor:"#222831da"}),t.stopPropagation()},n.onTouchStart=function(t){var e=t.currentTarget.offsetTop,o=t.currentTarget.offsetLeft,a=t.touches[0],i=a.pageX,s=a.pageY;n.longPressTimeout=setTimeout((function(){n.setState({dragging:!0,rel:{x:i-o,y:s-e},backgroundColor:"#222831a0",overflow:"hidden"})}),300),t.stopPropagation()},n.onTouchEnd=function(t){window.matchMedia("(orientation: portrait)").matches?n.setState({dragging:!1,backgroundColor:"#222831da",portraitPos:n.state.pos,overflow:"auto"}):n.setState({dragging:!1,backgroundColor:"#222831da",landscapePos:n.state.pos,overflow:"auto"}),t.stopPropagation()},n.onTouchMove=function(t){if(n.state.dragging){var e=t.touches[0],o=e.pageX,a=e.pageY,i=window,s=i.innerHeight,r=i.innerWidth,l=t.currentTarget,c=l.offsetWidth,d=l.offsetHeight,u=o-n.state.rel.x,p=a-n.state.rel.y;u<0?u=0:u>r-c&&(u=r-c),p<0?p=0:p>s-d&&(p=s-d),n.setState({pos:{x:u,y:p}}),t.stopPropagation()}else clearTimeout(n.longPressTimeout)},n.toggleControls=function(t){n.setState({showControls:!n.state.showControls}),t.currentTarget.blur(),t.stopPropagation(),t.preventDefault()},n.toggleAxes=function(t){t.currentTarget.blur(),n.props.displayAxis(!n.state.showAxes),n.setState({showAxes:!n.state.showAxes}),t.stopPropagation()},n.toggleLabels=function(t){t.currentTarget.blur();var e=!n.state.showLabels;n.setState({showLabels:e}),n.props.displayLabel(e),t.stopPropagation()},n.startAnimation=function(t){n.props.startAnimation(t),n.setState({animation:!0})},n.stopAnimation=function(){n.setState({animation:!1}),n.props.stopAnimation()},n.showControls=function(t){n.setState({showControls:!0,backgroundColor:"#222831da"}),t.stopPropagation()},n.stopPropagation=function(t){t.stopPropagation()},n.pressShowControls=function(t){console.log("button event start"),n.setState({backgroundColor:"#222831a0"}),t.stopPropagation()},n.updateArmConfig=function(t,e){var o=n.state.robotValues.slice();o[t]=e,n.setState({robotValues:o}),n.props.updateConfig(t,e)},n.renderSlider=function(t,e){return a.a.createElement(R,Object.assign({disabled:n.state.animation,value:n.state.robotValues[e],key:e},t,{updateValue:n.updateArmConfig,index:e,endEffectorYcor:n.props.getEndEffectorYcor,effectorIntersect:n.props.effectorIntersect}))},n.resetPosition=function(){n.props.resetPosition(),n.setState({robotValues:[0,0,0,0,0]})},n.containerRef=a.a.createRef(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?n.onMobile=!0:n.onMobile=!1;var i=window.innerHeight;return n.state={dragging:!1,pos:{x:0,y:0},portraitPos:{x:0,y:.55*i},landscapePos:{x:0,y:0},rel:{x:0,y:0},backgroundColor:"#222831da",width:"35%",height:"100%",overflow:"auto",showAxes:!0,showControls:!0,showLabels:!0,animation:!1,robotValues:[0,0,0,0,0]},n}return Object(l.a)(o,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeControls,!1),this.onMobile&&this.resizeControls()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeControls)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",{ref:this.containerRef,className:"controls disable-selection",onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd,unselectable:"on",style:{left:this.state.pos.x+"px",top:this.state.pos.y+"px",width:this.state.width,height:this.state.height,backgroundColor:this.state.backgroundColor,minWidth:this.onMobile?void 0:400,overflow:this.state.overflow,display:this.state.showControls?"block":"none"}},a.a.createElement("h1",null,"OWI Robot Arm: Controls"),a.a.createElement("p",{id:"text"},"Use the sliders move the associated robot arm joints. Click, touch, drag or scroll on the model screen to transform the display. Press and hold to drag the panel."),y.map(this.renderSlider),a.a.createElement("div",{className:"button-container"},a.a.createElement(f.a,{size:"lg",disabled:this.state.animation,variant:"primary","aria-label":"First group",onClick:this.toggleControls,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation},"Hide Controls"),a.a.createElement(f.a,{size:"lg",variant:"primary",disabled:this.state.animation,"aria-label":"Second group",onClick:this.toggleAxes,onMouseDown:this.stopPropagation,onTouchStart:this.stopPropagation,onMouseUp:this.stopPropagation,onTouchEnd:this.stopPropagation},this.state.showAxes?"Hide Axes":"Show Axes"),a.a.createElement(f.a,{size:"lg",disabled:this.state.animation,variant:"primary","aria-label":"Third group",onClick:this.toggleLabels,onMouseDown:this.stopPropagation,onMouseUp:this.stopPropagation,onTouchStart:this.stopPropagation,onTouchEnd:this.stopPropagation},this.state.showLabels?"Hide Labels":"Show Labels")),a.a.createElement(S,{resetPosition:this.resetPosition,receiveRobotValues:this.props.receiveRobotValues,startAnimation:this.startAnimation,stopAnimation:this.stopAnimation,animate:this.state.animation})),a.a.createElement("div",{className:"show-controls disable-selection",style:{display:this.state.showControls?"none":"block",backgroundColor:this.state.backgroundColor},onClick:this.showControls,onTouchEnd:this.showControls,onTouchStart:this.pressShowControls},a.a.createElement("h4",null,"Show Controls")))}}]),o}(a.a.Component),I=(o(18),function(t,e){return new p.e(t,t,e,30)}),O=function(t,e,o){return new p.c(t,e,o)},D=function(t,e,o,n,a){var i=e.fontface?e.fontface:"Arial",s=e.fontsize?e.fontsize:18,r=e.borderThickness?e.borderThickness:4,l=e.borderColor?e.borderColor:"#000000",c=e.backgroundColor?e.backgroundColor:"#ffffff00",d=e.textColor?e.textColor:"#000000",u=document.createElement("canvas"),h=u.getContext("2d");u.width=400,u.height=200,h.font="Bold "+s+"px "+i;var f=h.measureText(t).width;h.fillStyle=c,h.strokeStyle=l,h.lineWidth=r,function(t,e,o,n,a,i){t.beginPath(),t.moveTo(e+i,o),t.lineTo(e+n+30-i,o),t.quadraticCurveTo(e+n+30,o,e+n+30,o+i),t.lineTo(e+n+30,o+a-i),t.quadraticCurveTo(e+n+30,o+a,e+n+30-i,o+a),t.lineTo(e+i,o+a),t.quadraticCurveTo(e,o+a,e,o+a-i),t.lineTo(e,o+i),t.quadraticCurveTo(e,o,e+i,o),t.closePath(),t.fill(),t.stroke()}(h,r/2,r/2,f+r,1.4*s+r,20),h.fillStyle=d,h.fillText(t,r+15,s+r);var g=new p.B(u);g.minFilter=p.m,g.needsUpdate=!0;var m=new p.z({map:g,premultipliedAlpha:!0,dithering:!1,transparent:!0});m.precision="highp",m.depthWrite=!1;var b=new p.y(m);return b.scale.set(8,4,1),b.center.set(.1,.65),b.position.set(o,n,a),b},L=new p.p({color:16777215,transparent:!0,opacity:0}),z=new p.q({color:16768800}),U=new p.q({color:0}),B=function(t){Object(c.a)(o,t);var e=Object(d.a)(o);function o(t){var n;Object(r.a)(this,o),(n=e.call(this,t)).threeRootElement=a.a.createRef(),n.canvasRef=a.a.createRef(),n.canvasCtx=void 0,n.plane=void 0,n.frameId=0,n.light=new p.t(16777215),n.prevState={robotValues:[0,0,0,0,0],showAxis:!0,showLabels:!0,animation:!1,positionSeq:[]},n.rotateFuncs=void 0,n.handles={scene:new p.v,camera:new p.s(75,1,.1,1e3),renderer:new p.E({antialias:!0}),joint:[],jointAxisStart:[],jointAxisEnd:[],origins:[],gripper:[],gripperPositions:[],endEffector:new p.o(O(.5,.5,.5),L),robotBase:new p.o(O(8,5,16),L),labels:[],axis:new p.a(30),boundingBox1:null,boundingBox2:null,lines:[]},n.controls=new h.a(n.handles.camera,n.handles.renderer.domElement),n.worldPos=new p.D,n.crtIndex=0,n.nextIndex=0,n.angleDelta=[0,0,0,0,0],n.newPosition=[0,0,0,0,0],n.frameCount=0,n.createBoundingBoxes=function(){var t,e;n.handles.endEffector.geometry.computeBoundingBox(),n.handles.robotBase.geometry.computeBoundingBox(),n.handles.boundingBox1=new p.b,n.handles.boundingBox2=new p.b,null===(t=n.handles.boundingBox1)||void 0===t||t.setFromObject(n.handles.robotBase),null===(e=n.handles.boundingBox2)||void 0===e||e.setFromObject(n.handles.endEffector)},n.endEffectorIntersect=function(){var t;return null===(t=n.handles.boundingBox1)||void 0===t?void 0:t.containsPoint(n.endEffectorCoordinates())},n.updateArmConfig=function(t,e){var o=n.state.robotValues.slice();o[t]=e,n.setState({robotValues:o})},n.displayAxis=function(t){n.setState({showAxis:t})},n.displayLabel=function(t){n.setState({showLabels:t})},n.startAnimation=function(t){0!==t.length&&(n.newPosition=Object(u.a)(t[0].values),n.angleDelta=[0,0,0,0,0],n.crtIndex=0,n.nextIndex=1,n.frameCount=0,n.setState({animation:!0,positionSeq:Object(u.a)(t),robotValues:Object(u.a)(t[0].values)}))},n.stopAnimation=function(){n.setState({animation:!1}),n.resetPosition()},n.onSizeChange=function(){if(n.threeRootElement.current){var t=n.threeRootElement.current,e=t.clientWidth,o=t.clientHeight;n.handles.renderer.setSize(e,o,!0),n.handles.camera.aspect=e/o,n.handles.camera.updateProjectionMatrix()}},n.sendRobotValues=function(){return n.state.robotValues},n.rotateJoint1=function(t,e){var o=n.rad(t-e);n.handles.joint[0].rotateY(o)},n.rotateJoint2=function(t,e){var o=n.rad(t-e),a=n.handles.jointAxisStart[0].position.clone().sub(n.handles.jointAxisEnd[0].position),i=n.handles.origins[0].position;n.rotate(n.handles.joint[1],i,a,o)},n.rotateJoint3=function(t,e){var o=n.rad(t-e),a=n.handles.jointAxisStart[1].position.clone().sub(n.handles.jointAxisEnd[1].position),i=n.handles.origins[1].position;n.rotate(n.handles.joint[2],i,a,o)},n.rotateJoint4=function(t,e){var o=n.rad(t-e),a=n.handles.jointAxisStart[2].position.clone().sub(n.handles.jointAxisEnd[2].position),i=n.handles.origins[2].position;n.rotate(n.handles.joint[3],i,a,o)},n.updateGripper=function(t,e){var o=n.handles.gripperPositions[1].position.clone().sub(n.handles.gripperPositions[0].position),a=n.handles.gripperPositions[3].position.clone().sub(n.handles.gripperPositions[2].position);n.handles.gripper[0].position.copy(o.multiplyScalar((t-50)/100).add(n.handles.gripperPositions[1].position)),n.handles.gripper[1].position.copy(a.multiplyScalar((t-50)/100).add(n.handles.gripperPositions[3].position))},n.rad=function(t){return t*Math.PI/180},n.rotate=function(t,e,o,n){var a=o.normalize();t.position.sub(e),t.position.applyAxisAngle(a,n),t.position.add(e),t.rotateOnAxis(a,n)},n.updateAxesVisibility=function(t){n.handles.axis.visible=t;for(var e=5;e<8;e++)n.handles.labels[e].visible=t},n.displayLabelVisibility=function(t){for(var e=0;e<5;e++)n.handles.labels[e].visible=t;n.handles.lines.forEach((function(e){return e.visible=t}))},n.resetPosition=function(){n.setState({robotValues:[0,0,0,0,0]})},n.start=function(){n.frameId||(n.frameId=requestAnimationFrame(n.renderTHREE))},n.getEndEffectorYcor=function(){return n.handles.endEffector.getWorldPosition(n.worldPos),n.worldPos.y},n.endEffectorCoordinates=function(){return n.handles.endEffector.getWorldPosition(n.worldPos),n.worldPos.clone()},n.drawEffectCoordinates=function(){var t,e;n.handles.endEffector.getWorldPosition(n.worldPos);var o=n.worldPos,a=o.x,i=o.y,s=o.z,r=null===(t=n.canvasCtx)||void 0===t?void 0:t.canvas,l=r.width,c=r.height;null===(e=n.canvasCtx)||void 0===e||e.clearRect(0,0,l,c),n.drawTextOnCanvas("End Effector: ",80,30),n.drawTextOnCanvas("( ".concat(a.toFixed(1),", ").concat(i.toFixed(1),", ").concat(s.toFixed(1)," )"),80,60)},n.drawTextOnCanvas=function(t,e,o){n.canvasCtx&&(n.canvasCtx.font="Bold 25px Roboto",n.canvasCtx.fillStyle="rgba(0,0,0,1)",n.canvasCtx.fillText(t,e,o))},n.updateView=function(){n.controls.update(),n.light.position.copy(n.handles.camera.position),n.handles.renderer.render(n.handles.scene,n.handles.camera)},n.renderTHREE=function(){n.updateView(),n.drawEffectCoordinates(),n.state.animation&&n.drawPositions(),n.frameId=requestAnimationFrame(n.renderTHREE)},n.drawPositions=function(){var t=n.state.positionSeq.length,e=n.state.positionSeq;0!==t&&(1===t?n.setState({robotValues:e[0].values.slice()}):(100===n.frameCount&&(n.crtIndex++,n.frameCount=0,n.crtIndex>=t&&(n.crtIndex=0),n.nextIndex=n.crtIndex+1,n.crtIndex===t-1&&(n.nextIndex=0),n.newPosition=Object(u.a)(e[n.crtIndex].values)),100!==n.frameCount&&(0===n.frameCount&&(n.angleDelta=n.angleDelta.map((function(t,o){return(e[n.nextIndex].values[o]-e[n.crtIndex].values[o])/100}))),n.frameCount++,n.newPosition=n.newPosition.map((function(t,e){return t+n.angleDelta[e]})),n.setState({robotValues:Object(u.a)(n.newPosition)}))))},n.state=n.prevState,n.plane=null,n.light.position.set(-5,5,5),n.handles.scene.add(n.light),n.handles.renderer.setPixelRatio(window.devicePixelRatio),n.canvasCtx=null,n.controls.update(),n.rotateFuncs=[n.rotateJoint1,n.rotateJoint2,n.rotateJoint3,n.rotateJoint4,n.updateGripper];for(var i=0;i<4;i++)n.handles.joint.push(new p.j),n.handles.gripperPositions.push(new p.r),i<3&&(n.handles.jointAxisStart.push(new p.r),n.handles.jointAxisEnd.push(new p.r),n.handles.origins.push(new p.r));return n}return Object(l.a)(o,[{key:"componentDidMount",value:function(){var t,e;if(this.threeRootElement.current){this.threeRootElement.current.appendChild(this.handles.renderer.domElement);var o=this.threeRootElement.current,n=o.clientHeight,a=o.clientWidth;this.handles.renderer.setClearColor(14079702,1),this.handles.renderer.setSize(a,n),this.handles.camera.aspect=a/n,this.handles.camera.updateProjectionMatrix()}this.canvasCtx=null===(t=this.canvasRef.current)||void 0===t?void 0:t.getContext("2d"),this.handles.joint[2].add(this.handles.joint[3]),this.handles.joint[1].add(this.handles.joint[2]),this.handles.joint[0].add(this.handles.joint[1]),this.handles.scene.add(this.handles.joint[0]),function(t){var e=new p.j,o=[];o.push(new p.o(I(4,1),U)),o[0].position.set(0,.5,0),o.push(new p.o(I(4,2),z)),o[1].position.set(0,2,0),o.push(new p.o(I(4,1),U)),o[2].position.set(0,3.5,0),o.forEach((function(t){return e.add(t)}));var n=[];n.push(new p.o(O(12,4,6),U)),n[0].position.set(6,2,0),n.push(new p.o(O(6,.5,4),z)),n[1].position.set(8,4.25,0),e.add(n[0]),e.add(n[1]),t.scene.add(e),e.rotateY(Math.PI/2),t.joint[0].rotateY(Math.PI/2);var a=new p.o(O(3,3,3),z);a.position.set(0,5.5,0),t.joint[0].add(a);var i=[];i.push(new p.o(I(1.25,.5),U)),i[0].rotateX(Math.PI/2),i[0].position.set(0,5.5,-1.75),i.push(new p.o(I(1.25,.5),U)),i[1].rotateX(Math.PI/2),i[1].position.set(0,5.5,1.75),t.joint[0].add(i[0]),t.joint[0].add(i[1]),t.robotBase.position.set(0,2,-4),t.scene.add(t.robotBase)}(this.handles),function(t){var e=[],o=[];e.push(new p.o(O(1.5,8,.5),U)),e[0].position.set(0,9.5,-1.75),e.push(new p.o(O(1.5,8,.5),U)),e[1].position.set(0,9.5,1.75),e.forEach((function(e){return t.joint[1].add(e)})),o.push(new p.o(I(1.25,.5),U)),o[0].rotateX(Math.PI/2),o[0].position.set(0,13.5,1.75),o.push(new p.o(I(1.25,.5),U)),o[1].rotateX(Math.PI/2),o[1].position.set(0,13.5,-1.75),t.joint[1].add(o[0]),t.joint[1].add(o[1]),t.jointAxisStart[0].position.set(0,5.5,-5),t.jointAxisEnd[0].position.set(0,5.5,5),t.origins[0].position.set(0,5.5,0),t.joint[1].add(t.jointAxisStart[0]),t.joint[1].add(t.jointAxisEnd[0]),t.joint[1].add(t.origins[0])}(this.handles),function(t){var e=new p.o(O(3,8,3),z);e.position.set(0,16,0),t.joint[2].add(e);var o=[];o.push(new p.o(O(.25,6,2.5),U)),o[0].position.set(-1.625,16,0),t.joint[2].add(o[0]),o.push(new p.o(O(.25,6,2.5),U)),o[1].position.set(1.625,16,0),t.joint[2].add(o[1]);var n=[];n.push(new p.o(I(1.25,.5),U)),n[0].rotateX(Math.PI/2),n[0].position.set(0,18.5,1.75),n.push(new p.o(I(1.25,.5),U)),n[1].rotateX(Math.PI/2),n[1].position.set(0,18.5,-1.75),t.joint[2].add(n[0]),t.joint[2].add(n[1]),t.jointAxisStart[1].position.set(0,13.5,-5),t.jointAxisEnd[1].position.set(0,13.5,5),t.origins[1].position.set(0,13.5,0),t.joint[2].add(t.jointAxisStart[1]),t.joint[2].add(t.jointAxisEnd[1]),t.joint[2].add(t.origins[1])}(this.handles),function(t){var e=[];e.push(new p.o(I(1.25,3),U)),e[0].rotateX(Math.PI/2),e[0].position.set(0,21.5,0),t.joint[3].add(e[0]);var o=[];o.push(new p.o(O(2.5,2.5,.5),U)),o[0].position.set(0,21.5,-1.75),o.push(new p.o(O(2.5,2.5,.5),U)),o[1].position.set(0,21.5,1.75),o.push(new p.o(O(2.5,.5,3),U)),o[2].position.set(0,23,0),t.joint[3].add(o[0]),t.joint[3].add(o[1]),t.joint[3].add(o[2]),t.jointAxisStart[2].position.set(0,18.5,-5),t.jointAxisEnd[2].position.set(0,18.5,5),t.origins[2].position.set(0,18.5,0),t.joint[3].add(t.jointAxisStart[2]),t.joint[3].add(t.jointAxisEnd[2]),t.joint[3].add(t.origins[2])}(this.handles),(e=this.handles).gripper.push(new p.o(O(.7,6,.7),U)),e.gripper[0].position.set(0,23.5,-.7),e.gripper.push(new p.o(O(.7,6,.7),U)),e.gripper[1].position.set(0,23.5,.7),e.gripper.forEach((function(t){return e.joint[3].add(t)})),e.gripperPositions[0].position.set(0,23.5,-.15),e.gripperPositions[1].position.set(0,23.5,-.7),e.gripperPositions[2].position.set(0,23.5,.15),e.gripperPositions[3].position.set(0,23.5,.7),e.endEffector.position.set(0,26.5,0),e.joint[3].add(e.endEffector),e.gripperPositions.forEach((function(t){return e.joint[3].add(t)})),function(t){t.labels.push(D("Joint 1",j,-10.5,1.5,0)),t.scene.add(t.labels[0]),t.labels.push(D("Joint 2",j,0,5.5,10.5)),t.labels[1].rotateY(-Math.PI/2),t.joint[0].add(t.labels[1]),t.labels.push(D("Joint 3",j,0,13.5,10.5)),t.joint[1].add(t.labels[2]),t.labels.push(D("Joint 4",j,0,18.5,10.5)),t.joint[2].add(t.labels[3]),t.labels.push(D("Gripper",j,0,23.5,8.5)),t.joint[3].add(t.labels[4]),t.labels.push(D("x",C,30,0,0)),t.labels.push(D("y",T,0,30,0)),t.labels.push(D("z",A,0,0,30)),t.scene.add(t.labels[5]),t.scene.add(t.labels[6]),t.scene.add(t.labels[7]);var e=[];e.push(new p.D(0,5.5,0)),e.push(new p.D(0,5.5,9.75)),t.lines.push(new p.k((new p.d).setFromPoints(e),new p.l({color:3881787}))),t.joint[1].add(t.lines[0]),e.push(new p.D(0,18.5,0)),e.push(new p.D(0,18.5,9.75)),t.lines.push(new p.k((new p.d).setFromPoints([e[2],e[3]]),new p.l({color:3881787}))),t.joint[2].add(t.lines[1]),e.push(new p.D(0,13.5,0)),e.push(new p.D(0,13.5,9.75)),t.lines.push(new p.k((new p.d).setFromPoints([e[4],e[5]]),new p.l({color:3881787}))),t.joint[2].add(t.lines[2]),e.push(new p.D(0,22.5,0)),e.push(new p.D(0,22.5,7.95)),t.lines.push(new p.k((new p.d).setFromPoints([e[6],e[7]]),new p.l({color:3881787}))),t.joint[3].add(t.lines[3])}(this.handles),function(t){var e,o;t.scene.add(t.axis);var n=new p.i(60,60);t.scene.add(n),null===(e=t.camera)||void 0===e||e.position.set(0,33,40),null===(o=t.camera)||void 0===o||o.lookAt(t.scene.position)}(this.handles),this.createBoundingBoxes(),window.addEventListener("resize",this.onSizeChange,!1),this.start()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onSizeChange)}},{key:"shouldComponentUpdate",value:function(t,e){var o=this;return this.rotateFuncs.forEach((function(t,n){e.robotValues[n]!==o.prevState.robotValues[n]&&(t(e.robotValues[n],o.prevState.robotValues[n]),o.prevState.robotValues[n]=e.robotValues[n])})),e.showAxis!==this.prevState.showAxis&&(this.updateAxesVisibility(e.showAxis),this.prevState.showAxis=e.showAxis),e.showLabels!==this.prevState.showLabels&&(this.displayLabelVisibility(e.showLabels),this.prevState.showLabels=e.showLabels),!1}},{key:"render",value:function(){return a.a.createElement("div",{ref:this.threeRootElement,className:"threeCanvas"},a.a.createElement(k,{resetPosition:this.resetPosition,updateConfig:this.updateArmConfig,displayAxis:this.displayAxis,displayLabel:this.displayLabel,receiveRobotValues:this.sendRobotValues,startAnimation:this.startAnimation,stopAnimation:this.stopAnimation,getEndEffectorYcor:this.getEndEffectorYcor,effectorIntersect:this.endEffectorIntersect}),a.a.createElement("canvas",{className:"coordinate-canvas",ref:this.canvasRef}))}}]),o}(n.Component),N=function(t){Object(c.a)(o,t);var e=Object(d.a)(o);function o(){return Object(r.a)(this,o),e.apply(this,arguments)}return Object(l.a)(o,[{key:"render",value:function(){return a.a.createElement("div",{className:"page"},a.a.createElement(B,null))}}]),o}(a.a.PureComponent);o(28);document.body.style.overflow="hidden",s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(N,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0223bb3b.chunk.js.map